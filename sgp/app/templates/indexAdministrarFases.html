{% extends "base.html" %}
{% block body %}


<script>
    

    function mostrarFormulario(){
        $("#formulario-div").show("slow");
        $("#boton-mostrar-formulario").hide();
    }
    function ocultarFormulario(){
        $("#formulario-div").hide("slow");
        $("#boton-mostrar-formulario").show();
        $("#formulario")[0].reset();

    }

</script>


<div class="row">
    <div class="span12">
        <center>
        <hr>
        <h1> Administracion de fases del {{proyecto.nombre}}</h1>
        <hr>
        <b>Administrar fases, tipo items e items </b> 
      
        </center>
    </div>
</div>

<hr>

<div class="roles">

<div class="row">
      <div class="span10">
        <h2> Listado de Administracion Fases del {{proyecto.nombre}} </h2>
        <table class="table table-striped">
          <tr>
            <th>Id</th>
            <th>Nombre</th>
            <th>Numero de Fase</th>
            <th>Descripcion </th>
            <th>Estado</th>
            <th>Administrar Tipo Item</th>
            <th>Administrar Item</th>
            <th>Administrar Linea Base</th>
            <th>Solicitudes</th>
          </tr>
          <!-- aca antes estaba siempre todos las fases del proyecto -->
          <!-- ahora va las fases filtradas por sus roles -->
          {% for f in lista %}
          <tr>
            <td>{{f.idFase}}</td>
            <td>{{f.nombre}}</td>
            <td>{{f.numeroFase}}</td>
            <td>{{f.descripcion}}</td>
            <td>{{f.estado}}
            <!-- si tiene permiso para crear o modificar o eliminar tipo item puede entrar -->
            {% if (18 in session['permisos']) or (19 in session['permisos'] ) or (20 in session['permisos']) %}	
          		<td><a href="{{url_for('indexTipoItem')}}/{{proyecto.idProyecto}}/{{f.idFase}}" class="btn btn-large btn-success">Administrar Tipo Item</a></td>
          	{%else%}
				<td></td>
			{%endif%}
          	
          	
          	<!-- si tiene permiso para crear o modificar o eliminar item puede entrar -->
            {% if (13 in session['permisos']) or (14 in session['permisos'] ) or (17 in session['permisos']) %}
          		<td><a href="{{url_for('indexItem')}}/{{proyecto.idProyecto}}/{{f.idFase}}" class="btn btn-large btn-success">Administrar Item</a></td>
          	{%else%}
				<td></td>
			{%endif%}
          	
          	<!-- si tiene permiso para crear o modificar o eliminar linea base puede entrar -->
            {% if (21 in session['permisos']) or (22 in session['permisos'] ) or (23 in session['permisos']) %}
          		<td><a href="{{url_for('indexLineaBase')}}/{{proyecto.idProyecto}}/{{f.idFase}}" class="btn btn-large btn-success">Administrar Linea Base</a></td>
          	{%else%}
				<td></td>
			{%endif%}
			<!-- si tiene permiso para crear o modificar o eliminar solicitud puede entrar -->
			{% if (29 in session['permisos']) or (30 in session['permisos'] ) or (31 in session['permisos']) or (32 in session['permisos']) %}
          		<td><a href="{{url_for('indexSolicitud')}}/{{proyecto.idProyecto}}/{{f.idFase}}" class="btn btn-large btn-success">Solicitudes</a></td>
          	{%else%}
				<td></td>
			{%endif%}
			
          </tr>

          {% else %}
            <tr>
                NO HAY REGISTROS
            </tr>
          {% endfor %}

        </table>
      </div>

    </div>


<div class="row">
    <div class="span12">
    <center>
        <td><a href="{{url_for('grafoProyecto')}}/{{proyecto.idProyecto}}" class="btn btn-large btn-success">Grafo</a></td>
        </center>
    </div>
</div>



<hr>

<div class="row">
    <div class="span12">
    <center>
        <td><a href="{{url_for('salirDeAdminFase')}}/{{proyecto.idProyecto}}" class="btn btn-large btn-success">Salir</a></td>
        </center>
    </div>
</div>


</div>
{% endblock %}